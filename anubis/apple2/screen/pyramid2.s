*
* Le secret d'Anubis
*
* (c) 2025, Eric Cubizolle (TITAN)
* (c) 2025, Brutal Deluxe Software
*

	ext	PYRAMID2_str100
	ext	PYRAMID2_str200
	ext	PYRAMID2_str300
	ext	PYRAMID2_str400
	ext	PYRAMID2_str500
	ext	PYRAMID2_str600
	ext	PYRAMID2_str700
	ext	PYRAMID2_str750
	ext	PYRAMID2_str800
	ext	PYRAMID2_str900
	ext	PYRAMID2_str1000
	ext	PYRAMID2_str1030
	ext	PYRAMID2_NBC1	; nombre de clefs
	ext	PYRAMID2_NBC2	; nombre de clefs
	ext	PYRAMID2_str1100
	ext	PYRAMID2_str1200

PYRAMID2	@LOAD	#pCHAT
PYRAMID2_60	@SHOWPIC

	lda	#2
	sta	NBC
	
	sep	#$20	; combien de clefs
	lda	NBC
	ora	#'0'
	stal	PYRAMID2_NBC1
	stal	PYRAMID2_NBC2
	rep	#$20
	
	@WINDOW	#1;#theWINDOW1
	@PRINT	#1;PYRAMID2_str100
	@PRINT	#0;PYRAMID2_str200

PYRAMID2_LOOP	@INKEY
	@DEBUG
	cmp	#'1'
	bne	PYRAMID2_200
	jmp	PYRAMID2_300

PYRAMID2_200	cmp	#'2'
	bne	PYRAMID2_210
	
	lda	C
	cmp	#FALSE
	beq	PYRAMID2_400
	cmp	#TRUE
	bne	PYRAMID2_LOOP
	jmp	PYRAMID2_1200

PYRAMID2_210	cmp	#'3'
	bne	PYRAMID2_220
	jmp	PYRAMID2_500
PYRAMID2_220	cmp	#'4'
	bne	PYRAMID2_230
	jmp	PYRAMID6
PYRAMID2_230	cmp	#'5'
	bne	PYRAMID2_240
	jmp	PYRAMID2_600	

PYRAMID2_240	cmp	#'6'
	bne	PYRAMID2_LOOP

	lda	PEEK_7004
	cmp	#FALSE
	beq	PYRAMID2_700
	cmp	#TRUE
	bne	PYRAMID2_LOOP	
	jmp	PYRAMID2_1000

PYRAMID2_300	@PRINT	#0;PYRAMID2_str300
	@INKEY
	jmp	PYRAMID2_60

PYRAMID2_400	@PRINT	#0;PYRAMID2_str400
	@INKEY
	lda	#TRUE
	sta	C
	jmp	PYRAMID2_60

PYRAMID2_500	@PRINT	#0;PYRAMID2_str500
	@INKEY
	jmp	PYRAMID2_60

PYRAMID2_600	@PRINT	#0;PYRAMID2_str600
	@INKEY
	jmp	PYRAMID2_60

PYRAMID2_700	@PRINT	#0;PYRAMID2_str700

	lda	NBC
	cmp	#3
	beq	PYRAMID2_900
	cmp	#1
	bcc	PYRAMID2_750
	cmp	#3	; 1..2
	bcc	PYRAMID2_800

PYRAMID2_750	@PRINT	#0;PYRAMID2_str750
	@INKEY
	lda	#TRUE
	sta	PEEK_7004
	jmp	PYRAMID2_60

PYRAMID2_800	@PRINT	#0;PYRAMID2_str800
	@INKEY
	lda	#TRUE
	sta	PEEK_7004
	jmp	PYRAMID2_60

PYRAMID2_900	@PRINT	#0;PYRAMID2_str900
	@INKEY
	jmp	PYRAMID3

PYRAMID2_1000	@PRINT	#0;PYRAMID2_str1000

	lda	NBC
	cmp	#3
	beq	PYRAMID2_1100

	@PRINT	#0;PYRAMID2_str1030
	@INKEY
	jmp	PYRAMID2_60

PYRAMID2_1100	@PRINT	#0;PYRAMID2_str1100
	@INKEY
	jmp	PYRAMID2_60

PYRAMID2_1200	@PRINT	#0;PYRAMID2_str1200
	@INKEY
	jmp	PYRAMID2_60

*---

pPYRAMID2	strl	'@/data/pyramid2.lz4'

