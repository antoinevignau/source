WINDOW #1,25,36,4,19
INK 0,0
INK 1,3
INK 2,15
INK 3,24
	dfb	ePEN,#1,3
	asc	''0d
	asc	'A hall'0d
	asc	'frozen'0d
	asc	'where time'0d
	asc	'seems to'0d
	asc	'stand still'0d
	asc	'between'0d
	asc	'stone'0d
	asc	'and shadow'0d
	asc	'from the'0d
	asc	'heights.'0d         

	dfb	eLOCATE,13,20
	dfb	ePEN,2
	asc	'WHAT WILL YOU DO ?'0d
	dfb	ePEN,3
	dfb	eLOCATE,4,21
	asc	'1-Examine    2-Shout     3-Search'0d
	dfb	ePEN,2
	dfb	eLOCATE,4,22
	asc	'4-Climb the stairs NORTH'0d
	dfb	ePEN,3
	dfb	eLOCATE,4,23
	asc	'5-Go back to desert SOUTH'0d
	dfb	ePEN,2
	dfb	eLOCATE,4,24
	asc	'6-Open the door WEST'0d

k$=INKEY$
IF k$='0d1'0d THEN GOTO 300
IF k$='0d2'0d AND C=0 THEN GOTO 400
IF k$='0d2'0d AND C=1 THEN GOTO 1200
IF k$='0d3'0d THEN GOTO 500
IF k$='0d4'0d THEN RUN'0dPyramid6.bas'0d
IF k$='0d5'0d THEN GOTO 600
IF k$='0d6'0d AND PEEK(&BE84)=0 THEN GOTO 700
IF k$='0d6'0d AND PEEK(&BE84)=1 THEN GOTO 1000
IF k$<'0d1'0d OR k$>'0d6'0d THEN GOTO 200

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	''0d
	asc	'Your eyes sweep the room.'0d
	dfb	ePEN,2
	asc	''0d
	asc	'On the floor, ancient tiles bear'0d
	asc	'witness to a glorious past.'0d
	dfb	ePEN,3
	asc	''0d
	asc	'To the west, a door looks almost'0d
	asc	'modern, as if Ikea had a'0d
	asc	'deal with the pharaohs.'0d
	dfb	ePEN,1
	asc	''0d
	asc	'The anachronism pricks your neurons.'0d
	dfb	ePEN,2
	asc	''0d
	asc	'To the right, a steep stair rises,'0d
	asc	'so sharp it seems to test'0d
	asc	'your life insurance.'0d
	dfb	ePEN,1
	asc	''0d
	asc	'Everything breathes mystery,'0d
	asc	'a mix of history and something'0d
	asc	'oddly out of time.'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
GOTO 60

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	''0d
	asc	'You shout so loud you expect'0d
	asc	'dust to fall from the ceiling...'0d
	dfb	ePEN,2
	asc	''0d
	asc	'Your shout echoes in the pyramid...'0d
	asc	'Well, '27'echo'27' is a big word.'0d
	dfb	ePEN,1
	asc	''0d
	asc	'Let'27's say it dies in the total'0d
	asc	'indifference of millennial stones.'0d
	dfb	ePEN,3
	asc	''0d
	asc	'But at least you released all'0d
	asc	'frustration built since the'0d
	asc	'start of this adventure!'0d
	dfb	ePEN,2
	asc	''0d
	asc	'Feel free to shout again, if yelling'0d
	asc	'is your new passion.'0d
C=1
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
GOTO 60

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	''0d
	asc	'You inspect the room with the'0d
	asc	'precision of a tax auditor on duty.'0d
	dfb	ePEN,2
	asc	''0d
	asc	'After a few minutes crawling like'0d
	asc	'a scorpion, you find shards of'0d
	asc	'pottery.'0d
	dfb	ePEN,1
	asc	''0d
	asc	'Yes, pieces of clay thousands of'0d
	asc	'years old.'0d
	dfb	ePEN,3
	asc	''0d
	asc	'        Impressive, right?'0d
	dfb	ePEN,2
	asc	''0d
	asc	'You wonder if TARIQ really sent you'0d
	asc	'here for this, or just to get'0d
	asc	'rid of you for the weekend...'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
GOTO 60

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	''0d
	asc	'You want to turn back, return'0d
	asc	'to the Qattara desert...'0d
	dfb	ePEN,1
	asc	''0d
	asc	'But the pyramid door decided'0d
	dfb	eLOCATE,1,6
	asc	'differently:'0d
	dfb	ePEN,3
	asc	''0d
	asc	'Solid as a rock and planted with'0d
	asc	'tons of stone, it stubbornly'0d
	asc	'remains closed.'0d
	dfb	ePEN,2
	asc	''0d
	asc	'Still, admit it would be a shame'0d
	asc	'to give up now!'0d
	dfb	ePEN,3
	asc	''0d
	asc	'Imagine TARIQ'27's face if you gave'0d
	asc	'up the mission he entrusted you.'0d
	dfb	ePEN,1
	asc	''0d
	asc	'    So, hop hop hop, forward!'0d
	dfb	ePEN,2
	asc	''0d
	asc	'The adventure lies ahead now!'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
GOTO 60

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	'You head WEST, hoping to'0d
	asc	'discover what this door hides...'0d
	dfb	ePEN,1
	asc	''0d
	asc	'But you hit a most surprising'0d
	asc	'obstacle:'0d
	dfb	ePEN,2
	asc	''0d
	asc	'Made entirely of metal, it clashes'0d
	dfb	eLOCATE,1,8
	asc	'with the rest of the pyramid.'0d
	dfb	ePEN,3
	asc	''0d
	asc	'Three Ankh-shaped locks taunt'0d
	dfb	ePEN,1
	dfb	eLOCATE,1,10
	asc	'Three'0d
	dfb	ePEN,3
	asc	'silently.'0d
IF NBC>=1 AND NBC<3 THEN GOTO 800 '27'1st time, partial keys
IF NBC=3 THEN GOTO 900 '27'1st time, 3 keys
	dfb	ePEN,2
	asc	''0d
	asc	'Unless you plan to saw the metal with'0d
	asc	'your teeth, better hope the needed'0d
	asc	'keys are somewhere in the pyramid '0d
	asc	'to return and challenge this mysterious'0d
	asc	'door!'0d
	dfb	ePEN,3
	asc	''0d
	asc	'    Good luck on your quest!'0d
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
POKE &BE84,1
GOTO 60

	dfb	ePEN,3
	asc	''0d
	asc	'Alas, despite your searches in the'0d
	asc	'pyramid, you only found'0d;NBC;'0dkey(s).'0d
	dfb	ePEN,1
	dfb	eLOCATE,23,15
PRINT NBC
	dfb	ePEN,2
	asc	''0d
	asc	'You must continue exploring,'0d
	asc	'go deeper or solve other puzzles'0d
	asc	'then return to finally unlock'0d
	asc	'this door!'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
POKE &BE84,1
GOTO 60

	dfb	ePEN,3
	asc	''0d
	asc	'The cool thing is, by solving'0d
	asc	'all pyramid puzzles, you already'0d
	asc	'managed to find the three precious'0d
	dfb	eLOCATE,1,16
	asc	'keys!'0d
	dfb	ePEN,2
	dfb	eLOCATE,1,18
	asc	'You insert them in their locks'0d
	asc	'... and, miracle, the metal'0d
	asc	'door opens with a theatrical squeak...'0d
	dfb	ePEN,1
	asc	''0d
	asc	'   You step through...'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
RUN'0dPyramid3.bas'0d

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	''0d
	asc	'You approach the metal door again'0d
	asc	'which remains stoic, silent'0d
	asc	'and unwilling to open by itself...'0d
IF NBC=3 THEN GOTO 1100
	dfb	ePEN,2
	asc	''0d
	asc	'But you must act as patient'0d
	asc	'explorers, search each corner'0d
	asc	'and hope to find the mysterious'0d
	asc	'keys to finally challenge it.'0d
	dfb	ePEN,3
	asc	''0d
	asc	'Currently, you only have'0d;NBC;'0dkey(s)'0d
	asc	'of the 3 required.'0d
	dfb	ePEN,1
	dfb	eLOCATE,25,11
PRINT NBC
	dfb	eLOCATE,1,15
	asc	'       Good luck on your quest!'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
GOTO 60

	dfb	ePEN,2
	asc	''0d
	asc	'The good news is, by solving'0d
	asc	'all pyramid puzzles, you found'0d
	asc	'the three precious keys!'0d
	dfb	ePEN,3
	dfb	eLOCATE,1,12
	asc	'You insert them in their locks'0d
	asc	'... and, miracle, the metal'0d
	asc	'door opens with a theatrical squeak...'0d
	dfb	ePEN,1
	asc	''0d
	asc	''0d
	asc	'   You step through...'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
RUN'0dPyramid3.bas'0d

MODE 1
INK 0,0
INK 1,6
INK 2,15
INK 3,24
	dfb	ePEN,3
	asc	''0d
	asc	'   You take a deep breath and...'0d
	dfb	ePEN,1
	asc	''0d
	asc	''0d
	asc	'    BWAAAAAAAH ! GAAAH ! HOUHOUHOU !'0d
	asc	''0d
	asc	'                HONK !'0d
	dfb	ePEN,2
	asc	''0d
	asc	'Yes, you added a '0d;CHR$(34);'0dHONK'0d;CHR$(34);'0d for originality.'0d
	dfb	ePEN,3
	asc	''0d
	asc	''0d
	asc	'Actually, it looks like a mix'0d
	asc	'between Tarzan and a flush...'0d
	dfb	ePEN,1
	asc	''0d
	asc	''0d
	asc	'         Feeling better now?'0d
	dfb	ePEN,3
	dfb	eLOCATE,15,25
INPUT'0d ENTER  '0d,en$
GOTO 60
